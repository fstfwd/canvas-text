(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(exports,"__esModule",{value:!0});var _fontMetrics=require("./font-metrics"),_fontMetrics2=_interopRequireDefault(_fontMetrics),Canvas=function(){function e(t,r){_classCallCheck(this,e),this.element=t,this.lines=r.split("\n"),this.redraw(),window.addEventListener("resize",this.redraw.bind(this))}return _createClass(e,[{key:"redraw",value:function(){var e=this;requestAnimationFrame(function(t){var r=getComputedStyle(document.querySelector("#content")).width;e.element.width=parseInt(r);var n=e.element.getContext("2d",{alpha:!1}),i=getComputedStyle(e.element),a=new _fontMetrics2["default"](i.fontFamily,parseInt(i.fontSize)),l=e.element.width-64,o=[];n.font=i.font;var s=!0,u=!1,f=void 0;try{for(var c,h=e.lines[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){for(var d=c.value,v=/(?:[^\s-]+[ -]?)|(?:[\s-])/g,y="",m=void 0;m=v.exec(d);){m=m[0];var p=n.measureText(y).width,w=n.measureText(m).width;l>=p+w?y+=m:(o.push(y),y=m)}o.push(y),o.push("")}}catch(_){u=!0,f=_}finally{try{!s&&h["return"]&&h["return"]()}finally{if(u)throw f}}var g=3*a.height,C=g+1.4285*a.height*o.length;e.element.height=C,n.font=i.font,n.fillStyle="white",n.fillRect(0,0,e.element.width,e.element.height),n.fillStyle=i.color;var b=!0,x=!1,S=void 0;try{for(var M,q=o[Symbol.iterator]();!(b=(M=q.next()).done);b=!0){var d=M.value;n.fillText(d,32,g),g+=1.4285*a.height}}catch(_){x=!0,S=_}finally{try{!b&&q["return"]&&q["return"]()}finally{if(x)throw S}}})}}]),e}();exports["default"]=Canvas;

},{"./font-metrics":2}],2:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var FontMetrics=function e(t,s){_classCallCheck(this,e);var i=document.createElement("div");i.style.position="absolute",i.style.whiteSpace="nowrap",i.style.fontFamily=t,i.style.fontSize=s,document.body.appendChild(i);var n="mmmmmmmmmm";i.innerHTML=n,this.width=i.offsetWidth/n.length,this.height=i.offsetHeight;var o=document.createElement("span");o.style.display="inline-block",o.style.overflow="hidden",o.style.width="1px",o.style.height="1px",i.appendChild(o),this.baseline=o.offsetTop+o.offsetHeight,document.body.removeChild(i)};exports["default"]=FontMetrics;

},{}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function main(){new _canvas2["default"](document.querySelector("#canvas"),text)}var _canvas=require("./canvas"),_canvas2=_interopRequireDefault(_canvas);document.addEventListener("DOMContentLoaded",main);var text="A green hunting cap squeezed the top of the fleshy balloon of a head. The green earflaps, full of large ears and uncut hair and the fine bristles that grew in the ears themselves, stuck out on either side like turn signals indicating two directions at once. Full, pursed lips protruded beneath the bushy black moustache and, at their corners, sank into little folds filled with disapproval and potato chip crumbs. In the shadow under the green visor of the cap Ignatius J. Reilly's supercilious blue and yellow eyes looked down upon the other people waiting under the clock at the D. H. Holmes department store, studying the crowd of people for signs of bad taste in dress. Several of the outfits, Ignatius noticed, were new enough and expensive enough to be properly considered offenses against taste and decency. Possession of anything new or expensive only reflected a person's lack of theology and geometry; it could even cast doubts upon one's soul.\nIgnatius himself was dressed comfortably and sensibly. The hunting cap prevented head colds. The voluminous tweed trousers were durable and permitted unusually free locomotion. Their pleats and nooks contained pockets of warm, stale air that soothed Ignatius. The plaid flannel shirt made a jacket unnecessary while the muffler guarded exposed Reilly skin between earflap and collar. The outfit was acceptable by any theological and geometrical standards, however abstruse, and suggested a rich inner life.\nShifting from one hip to the other in his lumbering, elephantine fashion, Ignatius sent waves of flesh rippling beneath the tweed and flannel, waves that broke upon buttons and seams. Thus rearranged, he contemplated the long while that he had been waiting for his mother. Principally he considered the discomfort he was beginning to feel. It seemed as if his whole being was ready to burst from his swollen suede desert boots, and, as if to verify this, Ignatius turned his singular eyes toward his feet. The feet did indeed look swollen. He was prepared to offer the sight of those bulging boots to his mother as evidence of her thoughtlessness. Looking up, he saw the sun beginning to descend over the Mississippi at the foot of Canal Street. The Holmes clock said almost five. Already he was polishing a few carefully worded accusations designed to reduce his mother to repentance or, at least, confusion. He often had to keep her in her place.\nShe had driven him downtown in the old Plymouth, and while she was at the doctor's seeing about her arthritis, Ignatius had bought some sheet music at Werlein's for his trumpet and a new string for his lute. Then he had wandered into the Penny Arcade on Royal Street to see whether any new games had been installed. He had been disappointed to find the miniature mechanical baseball game gone. Perhaps it was only being repaired. The last time that he had played it the batter would not work and, after some argument, the management had returned his nickel, even though the Penny Arcade people had been base enough to suggest that Ignatius had himself broken the baseball machine by kicking it.\nConcentrating upon the fate of the miniature baseball machine, Ignatius detached his being from the physical reality of Canal Street and the people around him and therefore did not notice the two eyes that were hungrily watching him from behind one of D. H. Holmes' pillars, two sad eyes shining with hope and desire.\nWas it possible to repair the machine in New Orleans? Probably so. However, it might have to be sent to some place like Milwaukee or Chicago or some other city whose name Ignatius associated with efficient repair shops and permanently smoking factories. Ignatius hoped that the baseball game was being carefully handled in shipment, that none of its little players was being chipped or maimed by brutal railroad employees determined to ruin the railroad forever with damage claims from shippers, railroad employees who would subsequently go on strike and destroy the Illinois Central.";

},{"./canvas":1}]},{},[3])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvY2xlbS9Qcm9qZWN0cy9jYW52YXMtdGV4dC9zcmMvanMvY2FudmFzLmpzIiwiL1VzZXJzL2NsZW0vUHJvamVjdHMvY2FudmFzLXRleHQvc3JjL2pzL2ZvbnQtbWV0cmljcy5qcyIsIi9Vc2Vycy9jbGVtL1Byb2plY3RzL2NhbnZhcy10ZXh0L3NyYy9qcy9tYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzRsQkNFcUIsT0FBQSxXQUNuQixRQURtQixHQUNQLEVBQVMsd0JBREYsR0FFakIsS0FBSyxRQUFVLEVBQ2YsS0FBSyxNQUFRLEVBQUssTUFBTSxNQUV4QixLQUFLLFNBQ0wsT0FBTyxpQkFBaUIsU0FBWSxLQUFLLE9BQUwsS0FBQSwyQkFObkIsNENBVWpCLHVCQUFzQixTQUFBLEdBQ3BCLEdBQU0sR0FBUSxpQkFBaUIsU0FBUyxjQUFjLGFBQWEsS0FDbkUsR0FBSyxRQUFRLE1BQVEsU0FBUyxFQUU5QixJQUFJLEdBQVUsRUFBSyxRQUFRLFdBQVcsTUFBUSxPQUFPLElBQy9DLEVBQVEsaUJBQWlCLEVBQUssU0FDOUIsRUFBVSxHQUFBLGVBQUEsV0FBZ0IsRUFBTSxXQUFZLFNBQVMsRUFBTSxXQUMzRCxFQUFXLEVBQUssUUFBUSxNQUFRLEdBQ2hDLElBRU4sR0FBUSxLQUFPLEVBQU0sZ0NBRXJCLElBQUEsR0FBbUIsR0FBbkIsRUFBbUIsRUFBSyxNQUFMLE9BQUEsY0FBbkIsR0FBQSxFQUFBLEVBQUEsUUFBQSxNQUFBLEdBQUEsRUFBK0IsQ0FLN0IsT0FMUyxHQUFBLEVBQUEsTUFDSCxFQUFZLDhCQUNkLEVBQWUsR0FFZixFQUFBLE9BQ0ksRUFBTyxFQUFVLEtBQUssSUFBUSxDQUNwQyxFQUFPLEVBQUssRUFFWixJQUFNLEdBQWdCLEVBQVEsWUFBWSxHQUFjLE1BQ2xELEVBQVksRUFBUSxZQUFZLEdBQU0sS0FFWCxJQUE3QixFQUFnQixFQUNsQixHQUFn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ekIsZ0JBQVEsU0FBUixHQUFvQixNQUFNLEtBQU4sQ0EzQ0s7Ozs7Ozs7QUE2Q3pCLGdDQUFtQix3Q0FBbkIsd0dBQWtDO2dCQUF2QixvQkFBdUI7O0FBQ2hDLG9CQUFRLFFBQVIsQ0FBaUIsSUFBakIsRUFBdUIsRUFBdkIsRUFBMkIsT0FBM0IsRUFEZ0M7QUFFaEMsdUJBQVcsUUFBUSxNQUFSLEdBQWlCLE1BQWpCLENBRnFCO1dBQWxDOzs7Ozs7Ozs7Ozs7OztTQTdDeUI7T0FBTCxDQUF0QixDQURPOzs7O1NBVFUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IEZvbnRNZXRyaWNzIGZyb20gJy4vZm9udC1tZXRyaWNzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcbiAgY29uc3RydWN0b3IoZWxlbWVudCwgdGV4dCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5saW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xuXG4gICAgdGhpcy5yZWRyYXcoKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgOjp0aGlzLnJlZHJhdyk7XG4gIH1cblxuICByZWRyYXcoKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8gPT4ge1xuICAgICAgY29uc3Qgd2lkdGggPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JykpLndpZHRoO1xuICAgICAgdGhpcy5lbGVtZW50LndpZHRoID0gcGFyc2VJbnQod2lkdGgpO1xuXG4gICAgICBsZXQgY29udGV4dCA9IHRoaXMuZWxlbWVudC5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IGZhbHNlIH0pO1xuICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxlbWVudCk7XG4gICAgICBjb25zdCBtZXRyaWNzID0gbmV3IEZvbnRNZXRyaWNzKHN0eWxlLmZvbnRGYW1pbHksIHBhcnNlSW50KHN0eWxlLmZvbnRTaXplKSk7XG4gICAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuZWxlbWVudC53aWR0aCAtIDY0O1xuICAgICAgY29uc3QgcmVuZGVyZWRMaW5lcyA9IFtdO1xuXG4gICAgICBjb250ZXh0LmZvbnQgPSBzdHlsZS5mb250O1xuXG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgdGhpcy5saW5lcykge1xuICAgICAgICBjb25zdCB3b3JkU3BsaXQgPSAvKD86W15cXHMtXStbIC1dPyl8KD86W1xccy1dKS9nO1xuICAgICAgICBsZXQgcmVuZGVyZWRMaW5lID0gJyc7XG5cbiAgICAgICAgbGV0IHdvcmQ7XG4gICAgICAgIHdoaWxlICgod29yZCA9IHdvcmRTcGxpdC5leGVjKGxpbmUpKSkge1xuICAgICAgICAgIHdvcmQgPSB3b3JkWzBdO1xuXG4gICAgICAgICAgY29uc3QgcmVuZGVyZWRXaWR0aCA9IGNvbnRleHQubWVhc3VyZVRleHQocmVuZGVyZWRMaW5lKS53aWR0aDtcbiAgICAgICAgICBjb25zdCB3b3JkV2lkdGggPSBjb250ZXh0Lm1lYXN1cmVUZXh0KHdvcmQpLndpZHRoO1xuXG4gICAgICAgICAgaWYgKHJlbmRlcmVkV2lkdGggKyB3b3JkV2lkdGggPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgICAgIHJlbmRlcmVkTGluZSArPSB3b3JkO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW5kZXJlZExpbmVzLnB1c2gocmVuZGVyZWRMaW5lKTtcbiAgICAgICAgICAgIHJlbmRlcmVkTGluZSA9IHdvcmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVuZGVyZWRMaW5lcy5wdXNoKHJlbmRlcmVkTGluZSk7XG4gICAgICAgIHJlbmRlcmVkTGluZXMucHVzaCgnJyk7XG4gICAgICB9XG5cbiAgICAgIGxldCBvZmZzZXRZID0gbWV0cmljcy5oZWlnaHQgKiAzO1xuXG4gICAgICBjb25zdCBoZWlnaHQgPSBvZmZzZXRZICsgbWV0cmljcy5oZWlnaHQgKiAxLjQyODUgKiByZW5kZXJlZExpbmVzLmxlbmd0aDtcbiAgICAgIHRoaXMuZWxlbWVudC5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIGNvbnRleHQuZm9udCA9IHN0eWxlLmZvbnQ7XG4gICAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHRoaXMuZWxlbWVudC53aWR0aCwgdGhpcy5lbGVtZW50LmhlaWdodCk7XG4gICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IHN0eWxlLmNvbG9yO1xuXG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVuZGVyZWRMaW5lcykge1xuICAgICAgICBjb250ZXh0LmZpbGxUZXh0KGxpbmUsIDMyLCBvZmZzZXRZKTtcbiAgICAgICAgb2Zmc2V0WSArPSBtZXRyaWNzLmhlaWdodCAqIDEuNDI4NTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiLypcbiAqIFZhZ3VlbHkgdGFrZW4gZnJvbTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFzc2F0b3IvY2FudmFzLXRleHQtZWRpdG9yL2Jsb2IvNmZmMmU0N2E0YzIzNWQwZDQwMTc4NzVkMTE1M2M1Mjc3ZmU4MGIzOS9saWIvRm9udE1ldHJpY3MuanNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9udE1ldHJpY3Mge1xuICBjb25zdHJ1Y3RvcihmYW1pbHksIHNpemUpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGNvbnRhaW5lci5zdHlsZS53aGl0ZVNwYWNlID0gJ25vd3JhcCc7XG4gICAgY29udGFpbmVyLnN0eWxlLmZvbnRGYW1pbHkgPSBmYW1pbHk7XG4gICAgY29udGFpbmVyLnN0eWxlLmZvbnRTaXplID0gc2l6ZTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICAgIGNvbnN0IG1ldHJpY1RleHQgPSAnbW1tbW1tbW1tbSc7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IG1ldHJpY1RleHQ7XG5cbiAgICAvLyBXaWR0aCBpcyBsZXNzIHVzZWZ1bCwgc2luY2UgQ2FudmFzIGhhcyBBUElzIGZvciBtZWFzdXJpbmcgdGV4dCB3aWR0aFxuICAgIHRoaXMud2lkdGggPSBjb250YWluZXIub2Zmc2V0V2lkdGggLyBtZXRyaWNUZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmhlaWdodCA9IGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XG5cbiAgICBjb25zdCBiYXNlbGluZU1lYXN1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgYmFzZWxpbmVNZWFzdXJlLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICBiYXNlbGluZU1lYXN1cmUuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICBiYXNlbGluZU1lYXN1cmUuc3R5bGUud2lkdGggPSAnMXB4JztcbiAgICBiYXNlbGluZU1lYXN1cmUuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJhc2VsaW5lTWVhc3VyZSk7XG5cbiAgICB0aGlzLmJhc2VsaW5lID0gYmFzZWxpbmVNZWFzdXJlLm9mZnNldFRvcCArIGJhc2VsaW5lTWVhc3VyZS5vZmZzZXRIZWlnaHQ7XG5cbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG4gIH1cbn1cbiIsImltcG9ydCBDYW52YXMgZnJvbSAnLi9jYW52YXMnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbWFpbik7XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gIG5ldyBDYW52YXMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbnZhcycpLCB0ZXh0KTtcbn1cblxuY29uc3QgdGV4dCA9IGBcXFxuQSBncmVlbiBodW50aW5nIGNhcCBzcXVlZXplZCB0aGUgdG9wIG9mIHRoZSBmbGVzaHkgYmFsbG9vbiBvZiBhIGhlYWQuIFRoZSBncmVlbiBlYXJmbGFwcywgZnVsbCBvZiBsYXJnZSBlYXJzIGFuZCB1bmN1dCBoYWlyIGFuZCB0aGUgZmluZSBicmlzdGxlcyB0aGF0IGdyZXcgaW4gdGhlIGVhcnMgdGhlbXNlbHZlcywgc3R1Y2sgb3V0IG9uIGVpdGhlciBzaWRlIGxpa2UgdHVybiBzaWduYWxzIGluZGljYXRpbmcgdHdvIGRpcmVjdGlvbnMgYXQgb25jZS4gRnVsbCwgcHVyc2VkIGxpcHMgcHJvdHJ1ZGVkIGJlbmVhdGggdGhlIGJ1c2h5IGJsYWNrIG1vdXN0YWNoZSBhbmQsIGF0IHRoZWlyIGNvcm5lcnMsIHNhbmsgaW50byBsaXR0bGUgZm9sZHMgZmlsbGVkIHdpdGggZGlzYXBwcm92YWwgYW5kIHBvdGF0byBjaGlwIGNydW1icy4gSW4gdGhlIHNoYWRvdyB1bmRlciB0aGUgZ3JlZW4gdmlzb3Igb2YgdGhlIGNhcCBJZ25hdGl1cyBKLiBSZWlsbHkncyBzdXBlcmNpbGlvdXMgYmx1ZSBhbmQgeWVsbG93IGV5ZXMgbG9va2VkIGRvd24gdXBvbiB0aGUgb3RoZXIgcGVvcGxlIHdhaXRpbmcgdW5kZXIgdGhlIGNsb2NrIGF0IHRoZSBELiBILiBIb2xtZXMgZGVwYXJ0bWVudCBzdG9yZSwgc3R1ZHlpbmcgdGhlIGNyb3dkIG9mIHBlb3BsZSBmb3Igc2lnbnMgb2YgYmFkIHRhc3RlIGluIGRyZXNzLiBTZXZlcmFsIG9mIHRoZSBvdXRmaXRzLCBJZ25hdGl1cyBub3RpY2VkLCB3ZXJlIG5ldyBlbm91Z2ggYW5kIGV4cGVuc2l2ZSBlbm91Z2ggdG8gYmUgcHJvcGVybHkgY29uc2lkZXJlZCBvZmZlbnNlcyBhZ2FpbnN0IHRhc3RlIGFuZCBkZWNlbmN5LiBQb3NzZXNzaW9uIG9mIGFueXRoaW5nIG5ldyBvciBleHBlbnNpdmUgb25seSByZWZsZWN0ZWQgYSBwZXJzb24ncyBsYWNrIG9mIHRoZW9sb2d5IGFuZCBnZW9tZXRyeTsgaXQgY291bGQgZXZlbiBjYXN0IGRvdWJ0cyB1cG9uIG9uZSdzIHNvdWwuXG5JZ25hdGl1cyBoaW1zZWxmIHdhcyBkcmVzc2VkIGNvbWZvcnRhYmx5IGFuZCBzZW5zaWJseS4gVGhlIGh1bnRpbmcgY2FwIHByZXZlbnRlZCBoZWFkIGNvbGRzLiBUaGUgdm9sdW1pbm91cyB0d2VlZCB0cm91c2VycyB3ZXJlIGR1cmFibGUgYW5kIHBlcm1pdHRlZCB1bnVzdWFsbHkgZnJlZSBsb2NvbW90aW9uLiBUaGVpciBwbGVhdHMgYW5kIG5vb2tzIGNvbnRhaW5lZCBwb2NrZXRzIG9mIHdhcm0sIHN0YWxlIGFpciB0aGF0IHNvb3RoZWQgSWduYXRpdXMuIFRoZSBwbGFpZCBmbGFubmVsIHNoaXJ0IG1hZGUgYSBqYWNrZXQgdW5uZWNlc3Nhcnkgd2hpbGUgdGhlIG11ZmZsZXIgZ3VhcmRlZCBleHBvc2VkIFJlaWxseSBza2luIGJldHdlZW4gZWFyZmxhcCBhbmQgY29sbGFyLiBUaGUgb3V0Zml0IHdhcyBhY2NlcHRhYmxlIGJ5IGFueSB0aGVvbG9naWNhbCBhbmQgZ2VvbWV0cmljYWwgc3RhbmRhcmRzLCBob3dldmVyIGFic3RydXNlLCBhbmQgc3VnZ2VzdGVkIGEgcmljaCBpbm5lciBsaWZlLlxuU2hpZnRpbmcgZnJvbSBvbmUgaGlwIHRvIHRoZSBvdGhlciBpbiBoaXMgbHVtYmVyaW5nLCBlbGVwaGFudGluZSBmYXNoaW9uLCBJZ25hdGl1cyBzZW50IHdhdmVzIG9mIGZsZXNoIHJpcHBsaW5nIGJlbmVhdGggdGhlIHR3ZWVkIGFuZCBmbGFubmVsLCB3YXZlcyB0aGF0IGJyb2tlIHVwb24gYnV0dG9ucyBhbmQgc2VhbXMuIFRodXMgcmVhcnJhbmdlZCwgaGUgY29udGVtcGxhdGVkIHRoZSBsb25nIHdoaWxlIHRoYXQgaGUgaGFkIGJlZW4gd2FpdGluZyBmb3IgaGlzIG1vdGhlci4gUHJpbmNpcGFsbHkgaGUgY29uc2lkZXJlZCB0aGUgZGlzY29tZm9ydCBoZSB3YXMgYmVnaW5uaW5nIHRvIGZlZWwuIEl0IHNlZW1lZCBhcyBpZiBoaXMgd2hvbGUgYmVpbmcgd2FzIHJlYWR5IHRvIGJ1cnN0IGZyb20gaGlzIHN3b2xsZW4gc3VlZGUgZGVzZXJ0IGJvb3RzLCBhbmQsIGFzIGlmIHRvIHZlcmlmeSB0aGlzLCBJZ25hdGl1cyB0dXJuZWQgaGlzIHNpbmd1bGFyIGV5ZXMgdG93YXJkIGhpcyBmZWV0LiBUaGUgZmVldCBkaWQgaW5kZWVkIGxvb2sgc3dvbGxlbi4gSGUgd2FzIHByZXBhcmVkIHRvIG9mZmVyIHRoZSBzaWdodCBvZiB0aG9zZSBidWxnaW5nIGJvb3RzIHRvIGhpcyBtb3RoZXIgYXMgZXZpZGVuY2Ugb2YgaGVyIHRob3VnaHRsZXNzbmVzcy4gTG9va2luZyB1cCwgaGUgc2F3IHRoZSBzdW4gYmVnaW5uaW5nIHRvIGRlc2NlbmQgb3ZlciB0aGUgTWlzc2lzc2lwcGkgYXQgdGhlIGZvb3Qgb2YgQ2FuYWwgU3RyZWV0LiBUaGUgSG9sbWVzIGNsb2NrIHNhaWQgYWxtb3N0IGZpdmUuIEFscmVhZHkgaGUgd2FzIHBvbGlzaGluZyBhIGZldyBjYXJlZnVsbHkgd29yZGVkIGFjY3VzYXRpb25zIGRlc2lnbmVkIHRvIHJlZHVjZSBoaXMgbW90aGVyIHRvIHJlcGVudGFuY2Ugb3IsIGF0IGxlYXN0LCBjb25mdXNpb24uIEhlIG9mdGVuIGhhZCB0byBrZWVwIGhlciBpbiBoZXIgcGxhY2UuXG5TaGUgaGFkIGRyaXZlbiBoaW0gZG93bnRvd24gaW4gdGhlIG9sZCBQbHltb3V0aCwgYW5kIHdoaWxlIHNoZSB3YXMgYXQgdGhlIGRvY3RvcidzIHNlZWluZyBhYm91dCBoZXIgYXJ0aHJpdGlzLCBJZ25hdGl1cyBoYWQgYm91Z2h0IHNvbWUgc2hlZXQgbXVzaWMgYXQgV2VybGVpbidzIGZvciBoaXMgdHJ1bXBldCBhbmQgYSBuZXcgc3RyaW5nIGZvciBoaXMgbHV0ZS4gVGhlbiBoZSBoYWQgd2FuZGVyZWQgaW50byB0aGUgUGVubnkgQXJjYWRlIG9uIFJveWFsIFN0cmVldCB0byBzZWUgd2hldGhlciBhbnkgbmV3IGdhbWVzIGhhZCBiZWVuIGluc3RhbGxlZC4gSGUgaGFkIGJlZW4gZGlzYXBwb2ludGVkIHRvIGZpbmQgdGhlIG1pbmlhdHVyZSBtZWNoYW5pY2FsIGJhc2ViYWxsIGdhbWUgZ29uZS4gUGVyaGFwcyBpdCB3YXMgb25seSBiZWluZyByZXBhaXJlZC4gVGhlIGxhc3QgdGltZSB0aGF0IGhlIGhhZCBwbGF5ZWQgaXQgdGhlIGJhdHRlciB3b3VsZCBub3Qgd29yayBhbmQsIGFmdGVyIHNvbWUgYXJndW1lbnQsIHRoZSBtYW5hZ2VtZW50IGhhZCByZXR1cm5lZCBoaXMgbmlja2VsLCBldmVuIHRob3VnaCB0aGUgUGVubnkgQXJjYWRlIHBlb3BsZSBoYWQgYmVlbiBiYXNlIGVub3VnaCB0byBzdWdnZXN0IHRoYXQgSWduYXRpdXMgaGFkIGhpbXNlbGYgYnJva2VuIHRoZSBiYXNlYmFsbCBtYWNoaW5lIGJ5IGtpY2tpbmcgaXQuXG5Db25jZW50cmF0aW5nIHVwb24gdGhlIGZhdGUgb2YgdGhlIG1pbmlhdHVyZSBiYXNlYmFsbCBtYWNoaW5lLCBJZ25hdGl1cyBkZXRhY2hlZCBoaXMgYmVpbmcgZnJvbSB0aGUgcGh5c2ljYWwgcmVhbGl0eSBvZiBDYW5hbCBTdHJlZXQgYW5kIHRoZSBwZW9wbGUgYXJvdW5kIGhpbSBhbmQgdGhlcmVmb3JlIGRpZCBub3Qgbm90aWNlIHRoZSB0d28gZXllcyB0aGF0IHdlcmUgaHVuZ3JpbHkgd2F0Y2hpbmcgaGltIGZyb20gYmVoaW5kIG9uZSBvZiBELiBILiBIb2xtZXMnIHBpbGxhcnMsIHR3byBzYWQgZXllcyBzaGluaW5nIHdpdGggaG9wZSBhbmQgZGVzaXJlLlxuV2FzIGl0IHBvc3NpYmxlIHRvIHJlcGFpciB0aGUgbWFjaGluZSBpbiBOZXcgT3JsZWFucz8gUHJvYmFibHkgc28uIEhvd2V2ZXIsIGl0IG1pZ2h0IGhhdmUgdG8gYmUgc2VudCB0byBzb21lIHBsYWNlIGxpa2UgTWlsd2F1a2VlIG9yIENoaWNhZ28gb3Igc29tZSBvdGhlciBjaXR5IHdob3NlIG5hbWUgSWduYXRpdXMgYXNzb2NpYXRlZCB3aXRoIGVmZmljaWVudCByZXBhaXIgc2hvcHMgYW5kIHBlcm1hbmVudGx5IHNtb2tpbmcgZmFjdG9yaWVzLiBJZ25hdGl1cyBob3BlZCB0aGF0IHRoZSBiYXNlYmFsbCBnYW1lIHdhcyBiZWluZyBjYXJlZnVsbHkgaGFuZGxlZCBpbiBzaGlwbWVudCwgdGhhdCBub25lIG9mIGl0cyBsaXR0bGUgcGxheWVycyB3YXMgYmVpbmcgY2hpcHBlZCBvciBtYWltZWQgYnkgYnJ1dGFsIHJhaWxyb2FkIGVtcGxveWVlcyBkZXRlcm1pbmVkIHRvIHJ1aW4gdGhlIHJhaWxyb2FkIGZvcmV2ZXIgd2l0aCBkYW1hZ2UgY2xhaW1zIGZyb20gc2hpcHBlcnMsIHJhaWxyb2FkIGVtcGxveWVlcyB3aG8gd291bGQgc3Vic2VxdWVudGx5IGdvIG9uIHN0cmlrZSBhbmQgZGVzdHJveSB0aGUgSWxsaW5vaXMgQ2VudHJhbC5gO1xuIl19
